# Mama Configuration
# See docs/ARCHITECTURE.md for full reference
version: 1

# Agent identity
agent:
  name: "Mama"
  soul_path: "./soul.md"

# User info
user:
  name: "Alex"
  telegram_ids: []
  timezone: "Europe/Madrid"
  locale: "es-ES"

# LLM providers
llm:
  default_provider: "ollama"
  providers:
    ollama:
      host: "http://localhost:11434"
      # Local cloud mode: run `ollama signin` and keep localhost host.
      # Direct cloud API mode: set host to "https://ollama.com" and OLLAMA_API_KEY.
      api_key: "${OLLAMA_API_KEY}"
      default_model: "minimax-m2.5:cloud"
      smart_model: "minimax-m2.5:cloud"
      fast_model: "gemini-3-flash-preview:cloud"
      embedding_model: "nomic-embed-text"
  routing:
    complex_reasoning: "ollama"
    code_generation: "ollama"
    simple_tasks: "ollama"
    embeddings: "ollama"
    memory_consolidation: "ollama"
    private_content: "ollama"

# Channels
channels:
  terminal:
    enabled: true
  telegram:
    enabled: false
    bot_token: "${MAMA_TELEGRAM_TOKEN}"
    default_chat_id: 0
  api:
    enabled: false
    host: "127.0.0.1"
    port: 3377
    token: "${MAMA_API_TOKEN}"

# Security / Sandbox
sandbox:
  filesystem:
    workspace: "~/.mama/workspace"
    allowed_paths:
      - path: "~/.mama/**"
        actions: ["read", "write", "list"]
        level: "auto"
    denied_paths:
      - "~/.ssh/**"
      - "~/.gnupg/**"
  shell:
    safe_commands: ["ls", "cat", "head", "tail", "grep", "find", "wc", "date", "whoami", "pwd", "echo"]
    ask_commands: ["git commit", "git push", "mkdir", "cp", "mv"]
    denied_patterns: ["rm -rf", "sudo", "curl | bash"]
  network:
    allowed_domains: ["ollama.com", "api.telegram.org", "localhost"]
    ask_domains: true
    rate_limit_per_minute: 30
    log_all_requests: true

# Scheduler
scheduler:
  heartbeat:
    enabled: true
    interval_minutes: 30
    heartbeat_file: "~/.mama/heartbeat.md"
  max_concurrent_jobs: 3
  triggers:
    file_watchers: []
    webhooks:
      enabled: false
      host: "127.0.0.1"
      port: 3378
      hooks: []

daemon:
  pid_file: "~/.mama/mama.pid"
  health_check_interval_seconds: 30

# Memory
memory:
  consolidation:
    enabled: true
    interval_hours: 6
    min_episodes_to_consolidate: 10
    model: "ollama"
  max_episodic_entries: 100000
  embedding_dimensions: 768
  search_top_k: 10

# Logging
logging:
  level: "info"
  file: "~/.mama/logs/mama.log"
  max_size_mb: 50
  rotate: true
